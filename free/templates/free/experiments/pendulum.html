{% extends 'free/experiment.html' %}
{% load static %}
{% load i18n %}

{% block head %}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fomantic-ui/2.6.4/components/range.min.css">
{% endblock %}  

{% block tabheaders %}
    <a class="item" data-tab="configuration">{% trans 'Configuration'%}</a>
    <a class="item " data-tab="execution">{% trans 'Execution'%}</a>
    <a class="item " data-tab="results">{% trans 'Results'%}</a>
{% endblock %}

{% block tabs %}

    <!-- Begin of the configuration tab-->
    <div class="ui bottom attached tab segment"  data-tab="configuration">
        <div class="ui two column stackable center aligned grid ">
            <div class="column">
                <h2>{% trans 'Initial Displacement'%}</h2>
                <div class="ui segment">
                    <div class="ui range" id="range1"></div>
                        <br></br>
                        <div class="ui input">
                            <input type="text" id="DeltaX">
                        </div>
                    </div>
                    <h2>{% trans 'Number of Samples N'%}</h2>
                    <div class="ui segment">
                    <div class="ui labeled range" id="range2"></div>
                        <br></br>
                    <div class="ui input">
                        <input type="text" id="Samples">
                    </div>
                </div>
                <div class="ui hidden divider"></div>
                <div class="ui blue button" onclick="queue()">{% trans 'Submit'%}</div>
                {% comment %} <a href="execution">  {% endcomment %}
                <div class="ui green button" onclick="start()">{% trans 'Play'%}</div>
                {% comment %} </a> {% endcomment %}
                <div class="ui red button">{% trans 'Clear All'%}</div>
            </div>
            <div class="ui vertical divider"></div>
            <div class="column">
                <h2>{% trans 'Video stream '%}</h2>
                <div class="url video">
                    <div class="ui embed" data-url="https://www.youtube.com/embed/O6Xo21L0ybE" data-placeholder="https://semantic-ui.com/images/bear-waving.jpg">
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- End of the configuration tab-->

    <!-- Begin of the execution tab-->
    <div class="ui bottom attached tab segment" data-tab="execution" id="cena">
        <div class="ui two column stackable center aligned grid segment" >
            <div class="column">
                <div style="width: 550px; height: 500px" id="myplot"></div>
                {% comment %} <select id="plotselect" onchange="findplot()" >
                        <option value="trace1">plot1</option>
                        <option value="trace2">trace2</option>
                        <option value="trace3">trace3</option>
                        <option value="All">All</option>
                </select> {% endcomment %}
            </div>
            <div class="ui vertical divider"></div>
            <div class="column">
                <div style="width: 300px" class="ui container">
                    <h2 class="ui medium header">video</h2>
                    <div class=" url video">
                        <div class="ui embed" data-url="https://www.youtube.com/embed/O6Xo21L0ybE" data-placeholder="https://semantic-ui.com/images/bear-waving.jpg">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="ui two column stackable center aligned grid segment">
            <div class="column">
                <div style="width: 550px; height: 500px" id="myplot1"></div>
            </div>
            <div class="ui vertical divider"></div>
            <div class="column">
                <div style="width: 550px; height: 500px" id="myplot2"></div>
            </div>
        </div>
    </div>
    <!-- End of the execution tab-->

    <!-- Begin of the results tab-->
    <div class="ui bottom attached tab segment" data-tab="results" id="cena1">
    {% trans 'Experiment Result'%}
    </div>
    <!-- End of the results tab-->
{% endblock %}

{% block script %}
    <script type='text/javascript'>
        // PUT YOUR CUSTOM JAVASCRIPT HERE

        // You can access experiment config like this
        config = JSON.parse(document.getElementById('experiment-config').textContent);
        console.log(config);
        
        var exp_parameters = [];
        if (config.protocols !== null && config.protocols.length > 1) {
            exp_parameters = config.protocols[0].exp_paremeters
            // console.log(exp_parameters);
        }

        // If the url contains execution id at the end, the execution information will be also injected into the page
        execution_element = document.getElementById('execution-config');
        if (execution_element != null) {
            // The execution is present
            execution = JSON.parse(execution_element.textContent);
            console.log(execution)
        }
        else
        {
            console.log("No execution in URL, this is probably a new execution");
            // Here you will probably create the execution through the REST API
        }
        console.log({{object.protocol_id}})
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fomantic-ui/2.6.4/components/range.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/datatables.net-responsive/2.2.8/dataTables.responsive.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/components/tab.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/datatables.net-se/1.11.3/dataTables.semanticui.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="/static/js/tab_.js?v=00001"></script>
    <script src="/static/js/plotly_results.js?v=00001"></script>
{% endblock%}